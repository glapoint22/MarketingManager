<div *ngIf="index > -1" [style.marginLeft.px]="margin" class="tier-container">
  <!-- Header -->
  <div class="header" [ngClass]="{'collapsed': index != grid.tierToSearch, 'expanded': isExpanded}">
    <div *ngFor="let field of fields" class="field">
      {{field.name}}
    </div>

    <div class="button-container">
      <div *ngIf="index < grid.tiers.length - 1" class="button" (click)="collapseTiers(this)">
        <i class="fas fa-minus-square"></i>
      </div>
    </div>




  </div>

  <div *ngFor="let item of items | tierFilter: parentId | searchFilter: grid.searchValue: grid.tierToSearch : index; let i = index"
    class="row" [ngClass]="{'collapsed': index != grid.tierToSearch, 'expanded': isExpanded, 'max-expanded': checkboxes.length > 0 && checkboxes[i].nativeElement.checked}"
    (transitionend)="onTransitionEnd(i, $event)">

    <span *ngIf="index < grid.tiers.length - 1">
      <input #checkbox [id]="name + item.id" type="checkbox">
      <label [for]="name + item.id" (click)="onToggleExpandCollapse(item.id, i)"></label>
    </span>

    <span *ngFor="let data of item.data; let j = index">
      <span>{{data.value}}</span>
    </span>
    <tier [grid]="grid"></tier>
  </div>

</div>